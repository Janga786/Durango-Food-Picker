<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Hailee's Perfect Food Picker 💕</title>
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#8B5CF6">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Food Picker">
    <link rel="apple-touch-icon" href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTkyIiBoZWlnaHQ9IjE5MiIgdmlld0JveD0iMCAwIDE5MiAxOTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxOTIiIGhlaWdodD0iMTkyIiByeD0iMTkiIGZpbGw9InVybCgjZ3JhZGllbnQwXzBfMSkiLz4KPHN0eWxlPgouZW1vamkgeyBmb250LXNpemU6IDkwcHg7IGZvbnQtZmFtaWx5OiBBcHBsZSBDb2xvciBFbW9qaSwgU2Vnb2UgVUkgRW1vamksIE5vdG8gQ29sb3IgRW1vamksIHNhbnMtc2VyaWY7IH0KPC9zdHlsZT4KPHRleHQgeD0iNTAlIiB5PSI1NSUiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGRvbWluYW50LWJhc2VsaW5lPSJjZW50cmFsIiBjbGFzcz0iZW1vamkiPvCfmI08L3RleHQ+CjxkZWZzPgo8bGluZWFyR3JhZGllbnQgaWQ9ImdyYWRpZW50MF8wXzEiIHgxPSIwIiB5MT0iMCIgeDI9IjE5MiIgeTI9IjE5MiIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPgo8c3RvcCBzdG9wLWNvbG9yPSIjOEI1Q0Y2Ii8+CjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iIzYzNjZGMSIvPgo8L2xpbmVhckdyYWRpZW50Pgo8L2RlZnM+Cjwvc3ZnPgo=">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary-color: #8B5CF6;
            --secondary-color: #A78BFA;
            --accent-color: #6366F1;
            --dark-bg: #1F2937;
            --darker-bg: #111827;
            --light-grey: #F3F4F6;
            --med-grey: #9CA3AF;
            --dark-grey: #4B5563;
            --white: #FFFFFF;
            --black: #000000;
            --gradient-1: linear-gradient(135deg, #8B5CF6 0%, #6366F1 100%);
            --gradient-2: linear-gradient(135deg, #A78BFA 0%, #8B5CF6 100%);
            --gradient-3: linear-gradient(135deg, #F3F4F6 0%, #E5E7EB 100%);
            --gradient-dark: linear-gradient(135deg, #1F2937 0%, #111827 100%);
            --shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
            --shadow-hover: 0 15px 35px rgba(0, 0, 0, 0.25);
            --shadow-purple: 0 10px 25px rgba(139, 92, 246, 0.3);
            --border-radius: 20px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: var(--light-grey);
            color: var(--darker-bg);
            line-height: 1.6;
            overflow-x: hidden;
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
        }

        .app-container {
            max-width: 420px;
            margin: 0 auto;
            min-height: 100vh;
            background: var(--white);
            position: relative;
            box-shadow: var(--shadow);
        }

        /* Header */
        .header {
            background: var(--gradient-1);
            padding: 40px 30px 30px;
            text-align: center;
            border-radius: 0 0 30px 30px;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.1) 0%, transparent 70%);
            animation: float 6s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(180deg); }
        }

        .header h1 {
            color: var(--white);
            font-size: 2.2rem;
            font-weight: 700;
            margin-bottom: 10px;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
            position: relative;
            z-index: 1;
        }

        .header p {
            color: rgba(255, 255, 255, 0.9);
            font-size: 1.1rem;
            font-weight: 300;
            position: relative;
            z-index: 1;
        }

        /* Screen Management */
        .screen {
            display: none;
            padding: 30px;
            min-height: calc(100vh - 200px);
        }

        .screen.active {
            display: block;
            animation: slideIn 0.5s ease-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(30px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        /* Welcome Screen */
        .welcome-content {
            text-align: center;
            margin-top: 40px;
        }

        .welcome-message {
            font-size: 1.3rem;
            color: var(--dark-grey);
            margin-bottom: 30px;
            font-weight: 500;
        }

        .last-choice-card {
            background: var(--gradient-3);
            padding: 20px;
            border-radius: var(--border-radius);
            margin-bottom: 30px;
            box-shadow: var(--shadow);
            border: 2px solid var(--med-grey);
        }

        .last-choice-card h3 {
            color: var(--darker-bg);
            font-size: 1.1rem;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .last-choice-text {
            font-size: 1rem;
            color: var(--dark-grey);
            font-weight: 400;
        }

        /* Buttons */
        .btn-primary {
            background: var(--gradient-1);
            color: var(--white);
            border: none;
            padding: 18px 40px;
            border-radius: 50px;
            font-size: 1.2rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: var(--shadow-purple);
            text-transform: none;
            margin: 10px;
            position: relative;
            overflow: hidden;
            touch-action: manipulation;
            -webkit-tap-highlight-color: transparent;
            user-select: none;
        }

        .btn-primary:active {
            transform: translateY(-1px) scale(0.98);
            box-shadow: 0 8px 16px rgba(139, 92, 246, 0.4);
        }

        .btn-primary::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: left 0.5s;
        }

        .btn-primary:hover::before {
            left: 100%;
        }

        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-hover);
        }

        .btn-secondary {
            background: var(--white);
            color: var(--darker-bg);
            border: 2px solid var(--secondary-color);
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 5px;
        }

        .btn-secondary:hover {
            background: var(--secondary-color);
            color: var(--white);
            transform: translateY(-2px);
        }

        /* Question Screens */
        .question-content {
            text-align: center;
            margin-top: 20px;
        }

        .question-title {
            font-size: 1.8rem;
            color: var(--darker-bg);
            margin-bottom: 30px;
            font-weight: 600;
        }

        .options-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }

        .option-card {
            background: var(--white);
            border: 2px solid var(--med-grey);
            border-radius: var(--border-radius);
            padding: 25px 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            min-height: 120px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            touch-action: manipulation;
            -webkit-tap-highlight-color: transparent;
            user-select: none;
            -webkit-touch-callout: none;
        }

        .option-card:active {
            transform: translateY(-2px) scale(0.98);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        .option-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--gradient-dark);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .option-card:hover::before {
            opacity: 1;
        }

        .option-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-hover);
            border-color: var(--primary-color);
        }

        .option-card:hover .option-emoji,
        .option-card:hover .option-text {
            color: var(--white);
            position: relative;
            z-index: 1;
        }

        .option-emoji {
            font-size: 3.5rem;
            margin-bottom: 12px;
            display: block;
            transition: all 0.3s ease;
            line-height: 1;
        }

        .option-text {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--darker-bg);
            transition: all 0.3s ease;
            position: relative;
            z-index: 1;
            text-align: center;
            line-height: 1.2;
        }

        /* Results Screen */
        .results-content {
            margin-top: 20px;
        }

        .results-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .results-title {
            font-size: 1.8rem;
            color: var(--darker-bg);
            margin-bottom: 10px;
            font-weight: 600;
        }

        .results-subtitle {
            font-size: 1rem;
            color: var(--dark-grey);
            font-weight: 400;
        }

        .restaurants-list {
            max-height: 60vh;
            overflow-y: auto;
            padding-right: 10px;
        }

        .restaurants-list::-webkit-scrollbar {
            width: 6px;
        }

        .restaurants-list::-webkit-scrollbar-track {
            background: var(--light-grey);
            border-radius: 3px;
        }

        .restaurants-list::-webkit-scrollbar-thumb {
            background: var(--secondary-color);
            border-radius: 3px;
        }

        .restaurant-item {
            background: var(--white);
            border: 2px solid var(--med-grey);
            border-radius: var(--border-radius);
            padding: 20px;
            margin-bottom: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            touch-action: manipulation;
            -webkit-tap-highlight-color: transparent;
            user-select: none;
        }

        .restaurant-item:active {
            transform: translateY(-1px) scale(0.98);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.15);
        }

        .restaurant-item:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-hover);
            border-color: var(--primary-color);
        }

        .restaurant-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .restaurant-name-section {
            flex: 1;
        }

        .restaurant-name {
            font-size: 1.4rem;
            font-weight: 700;
            color: var(--darker-bg);
            margin-bottom: 5px;
        }

        .restaurant-cuisine {
            font-size: 0.9rem;
            color: var(--dark-grey);
            font-weight: 500;
        }

        .match-percentage {
            text-align: right;
        }

        .percentage-value {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary-color);
            line-height: 1;
        }

        .percentage-label {
            font-size: 0.8rem;
            color: var(--dark-grey);
            font-weight: 500;
        }

        .restaurant-details {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 15px;
        }

        .price-budget {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .price-display {
            background: var(--gradient-2);
            color: var(--white);
            padding: 4px 12px;
            border-radius: 15px;
            font-weight: 600;
            font-size: 0.9rem;
        }

        .signature-dish {
            font-size: 0.9rem;
            color: var(--dark-grey);
            font-style: italic;
        }

        .ratings-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: var(--light-grey);
            padding: 12px 15px;
            border-radius: 12px;
            margin-bottom: 15px;
        }

        .rating-mini {
            text-align: center;
            flex: 1;
        }

        .rating-mini-emoji {
            font-size: 1.2rem;
            margin-bottom: 2px;
            display: block;
        }

        .rating-mini-value {
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--darker-bg);
        }

        .restaurant-message {
            font-size: 0.95rem;
            color: var(--dark-grey);
            line-height: 1.5;
            font-style: italic;
            border-left: 3px solid var(--secondary-color);
            padding-left: 12px;
            margin-top: 10px;
        }

        /* Floating Action Button */
        .fab {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: var(--gradient-dark);
            color: var(--white);
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            box-shadow: var(--shadow);
            transition: all 0.3s ease;
            z-index: 100;
        }

        .fab:hover {
            transform: scale(1.1);
            box-shadow: var(--shadow-hover);
        }

        .surprise-btn {
            position: fixed;
            bottom: 100px;
            right: 30px;
            background: var(--gradient-1);
            color: var(--white);
            border: none;
            padding: 12px 20px;
            border-radius: 25px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            box-shadow: var(--shadow-purple);
            transition: all 0.3s ease;
            z-index: 100;
        }

        .surprise-btn:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-hover);
        }

        .hidden {
            display: none !important;
        }

        /* Mobile Optimization */
        @media (max-width: 480px) {
            .app-container {
                max-width: 100%;
                min-height: 100vh;
                margin: 0;
                border-radius: 0;
            }

            .header {
                padding: 40px 20px 30px;
                border-radius: 0 0 25px 25px;
            }

            .header h1 {
                font-size: 2rem;
            }

            .header p {
                font-size: 1rem;
            }

            .screen {
                padding: 25px 20px;
                min-height: calc(100vh - 150px);
            }

            .welcome-message {
                font-size: 1.2rem;
                margin-bottom: 40px;
            }

            .question-title {
                font-size: 1.6rem;
                margin-bottom: 25px;
            }

            .options-grid {
                grid-template-columns: 1fr;
                gap: 20px;
                margin-bottom: 40px;
            }

            .option-card {
                min-height: 100px;
                padding: 30px 20px;
                margin: 0;
            }

            .option-emoji {
                font-size: 3rem;
                margin-bottom: 10px;
            }

            .option-text {
                font-size: 1.1rem;
                font-weight: 600;
            }

            .btn-primary {
                width: 100%;
                padding: 20px 30px;
                font-size: 1.1rem;
                margin: 20px 0;
            }

            .restaurant-details {
                grid-template-columns: 1fr;
                gap: 15px;
            }

            .restaurant-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }

            .match-percentage {
                align-self: flex-end;
                margin-top: -10px;
            }

            .percentage-value {
                font-size: 1.8rem;
            }

            .restaurant-item {
                padding: 25px;
                margin-bottom: 20px;
            }

            .restaurants-list {
                max-height: 55vh;
                padding-right: 5px;
            }

            .fab {
                bottom: 25px;
                right: 25px;
                width: 55px;
                height: 55px;
                font-size: 1.3rem;
            }

            .surprise-btn {
                bottom: 90px;
                right: 25px;
                padding: 15px 25px;
                font-size: 0.95rem;
            }
        }

        /* Extra small screens (iPhone SE, etc.) */
        @media (max-width: 375px) {
            .header {
                padding: 35px 15px 25px;
            }

            .header h1 {
                font-size: 1.8rem;
            }

            .screen {
                padding: 20px 15px;
            }

            .option-card {
                padding: 25px 15px;
                min-height: 90px;
            }

            .option-emoji {
                font-size: 2.5rem;
            }

            .option-text {
                font-size: 1rem;
            }

            .restaurant-item {
                padding: 20px;
            }
        }

        /* Loading Animation */
        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 40px 0;
        }

        .loading-spinner {
            width: 40px;
            height: 40px;
            border: 4px solid var(--med-grey);
            border-top: 4px solid var(--primary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <div class="header">
            <h1>💕 Hey Hailee!</h1>
            <p>Your personal food picker ✨</p>
        </div>

        <!-- Welcome Screen -->
        <div id="welcome-screen" class="screen active">
            <div class="welcome-content">
                <div class="welcome-message">
                    I know you're hungry but can't decide what you want, but I gochuuuu... 
                    <br><br>
                    This will make it so you can find exactly what you're craving everytime💕
                </div>
                
                <button class="btn-primary" onclick="startQuestionnaire()">
                    Find My Perfect Meal! ✨
                </button>
            </div>
        </div>

        <!-- Mood Screen -->
        <div id="mood-screen" class="screen">
            <div class="question-content">
                <h2 class="question-title">What's your vibe right now? 💭</h2>
                <div class="options-grid">
                    <div class="option-card" onclick="selectOption('mood', 'Comfort')">
                        <span class="option-emoji">🤗</span>
                        <span class="option-text">Comfort Food</span>
                    </div>
                    <div class="option-card" onclick="selectOption('mood', 'Healthy')">
                        <span class="option-emoji">🥗</span>
                        <span class="option-text">Feeling Healthy</span>
                    </div>
                    <div class="option-card" onclick="selectOption('mood', 'Indulgent')">
                        <span class="option-emoji">😋</span>
                        <span class="option-text">Treat Yourself</span>
                    </div>
                    <div class="option-card" onclick="selectOption('mood', 'Adventure')">
                        <span class="option-emoji">🌟</span>
                        <span class="option-text">Something New</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Cuisine Screen -->
        <div id="cuisine-screen" class="screen">
            <div class="question-content">
                <h2 class="question-title">What sounds amazing? 🍽️</h2>
                <div class="options-grid">
                    <div class="option-card" onclick="selectOption('cuisine', 'Mexican')">
                        <span class="option-emoji">🌮</span>
                        <span class="option-text">Mexican</span>
                    </div>
                    <div class="option-card" onclick="selectOption('cuisine', 'American')">
                        <span class="option-emoji">🍔</span>
                        <span class="option-text">American</span>
                    </div>
                    <div class="option-card" onclick="selectOption('cuisine', 'Italian')">
                        <span class="option-emoji">🍝</span>
                        <span class="option-text">Italian</span>
                    </div>
                    <div class="option-card" onclick="selectOption('cuisine', 'Asian')">
                        <span class="option-emoji">🍜</span>
                        <span class="option-text">Asian</span>
                    </div>
                    <div class="option-card" onclick="selectOption('cuisine', 'Fast Food')">
                        <span class="option-emoji">🍟</span>
                        <span class="option-text">Fast Food</span>
                    </div>
                    <div class="option-card" onclick="selectOption('cuisine', 'Surprise')">
                        <span class="option-emoji">🎲</span>
                        <span class="option-text">Surprise Me!</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Budget Screen -->
        <div id="budget-screen" class="screen">
            <div class="question-content">
                <h2 class="question-title">What's the budget today? 💰</h2>
                <div class="options-grid">
                    <div class="option-card" onclick="selectOption('budget', 'cheap')">
                        <span class="option-emoji">💵</span>
                        <span class="option-text">Budget Friendly</span>
                    </div>
                    <div class="option-card" onclick="selectOption('budget', 'moderate')">
                        <span class="option-emoji">💸</span>
                        <span class="option-text">Treat Yourself</span>
                    </div>
                    <div class="option-card" onclick="selectOption('budget', 'splurge')">
                        <span class="option-emoji">💎</span>
                        <span class="option-text">Go All Out</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Results Screen -->
        <div id="results-screen" class="screen">
            <div class="results-content">
                <div class="results-header">
                    <h2 class="results-title">Perfect! Here's what I found for you! 🎉</h2>
                    <p class="results-subtitle">Ranked by how well they match what you're craving</p>
                </div>
                
                <div class="restaurants-list" id="restaurants-list">
                    <!-- Restaurant items will be dynamically inserted here -->
                </div>

                <button class="btn-primary" onclick="resetApp()">
                    Let me try again! 🔄
                </button>
            </div>
        </div>

        <!-- Floating Action Buttons -->
        <button class="fab" onclick="resetApp()" title="Start Over">
            🏠
        </button>
        
        <button class="surprise-btn" onclick="surpriseMe()">
            🎉 Surprise Me!
        </button>
    </div>

    <script>
        // Comprehensive Durango restaurant database with accurate ratings
        const restaurants = [
            // Mexican Restaurants
            {
                name: "Zia Taqueria",
                cuisine: "Mexican",
                mood: ["Healthy", "Comfort"],
                budget: "cheap",
                healthRating: 8,
                gainsRating: 7,
                cheapRating: 9,
                priceRange: "$",
                signature: "Fresh Burrito Bowl",
                personalMessage: "You always love their fresh ingredients and that burrito bowl hits the spot every time! Perfect for when you want something healthy but filling.",
                image: "🌯"
            },
            {
                name: "Hermosa Cafe",
                cuisine: "Mexican",
                mood: ["Comfort", "Indulgent"],
                budget: "moderate",
                healthRating: 5,
                gainsRating: 6,
                cheapRating: 6,
                priceRange: "$$",
                signature: "Breakfast Burrito",
                personalMessage: "Babe, their breakfast burritos are absolutely legendary! Perfect when you want something hearty that'll keep you satisfied for hours.",
                image: "🌯"
            },
            {
                name: "El Parasol",
                cuisine: "Mexican",
                mood: ["Comfort", "Healthy"],
                budget: "cheap",
                healthRating: 7,
                gainsRating: 6,
                cheapRating: 8,
                priceRange: "$",
                signature: "Green Chile",
                personalMessage: "Authentic New Mexican flavors that remind you of home - their green chile is absolutely perfect!",
                image: "🌶️"
            },
            {
                name: "Guadalajara Grill",
                cuisine: "Mexican",
                mood: ["Comfort", "Indulgent"],
                budget: "moderate",
                healthRating: 5,
                gainsRating: 7,
                cheapRating: 7,
                priceRange: "$$",
                signature: "Carne Asada",
                personalMessage: "When you want authentic Mexican food that feels like a celebration - their carne asada is incredible!",
                image: "🥩"
            },
            {
                name: "Nayarit Taqueria",
                cuisine: "Mexican",
                mood: ["Comfort", "Adventure"],
                budget: "cheap",
                healthRating: 6,
                gainsRating: 7,
                cheapRating: 9,
                priceRange: "$",
                signature: "Street Tacos",
                personalMessage: "Authentic Mexican street food that's so flavorful and affordable - exactly what you crave!",
                image: "🌮"
            },

            // American Restaurants
            {
                name: "Bread",
                cuisine: "American",
                mood: ["Comfort", "Healthy"],
                budget: "moderate",
                healthRating: 7,
                gainsRating: 6,
                cheapRating: 5,
                priceRange: "$$",
                signature: "Artisan Sandwich",
                personalMessage: "You know how picky you are about bread? Their artisan sandwiches are absolutely perfect - exactly the kind of quality you love!",
                image: "🥪"
            },
            {
                name: "Grassburger",
                cuisine: "American",
                mood: ["Indulgent", "Comfort"],
                budget: "moderate",
                healthRating: 6,
                gainsRating: 8,
                cheapRating: 4,
                priceRange: "$$",
                signature: "Grass-Fed Burger",
                personalMessage: "When you're craving a burger but want it to be good quality - their grass-fed beef is exactly what you deserve, babe!",
                image: "🍔"
            },
            {
                name: "College Drive Cafe",
                cuisine: "American",
                mood: ["Comfort", "Indulgent"],
                budget: "moderate",
                healthRating: 4,
                gainsRating: 5,
                cheapRating: 6,
                priceRange: "$$",
                signature: "Breakfast Platter",
                personalMessage: "Perfect for when you want that cozy brunch feeling - their breakfast is always so satisfying!",
                image: "🥞"
            },
            {
                name: "Durango Bagel",
                cuisine: "American",
                mood: ["Comfort"],
                budget: "cheap",
                healthRating: 5,
                gainsRating: 4,
                cheapRating: 9,
                priceRange: "$",
                signature: "Fresh Bagel",
                personalMessage: "Simple, delicious, and perfect for when you want something familiar and comforting without spending much!",
                image: "🥯"
            },
            {
                name: "James Ranch Grill",
                cuisine: "American",
                mood: ["Indulgent", "Healthy"],
                budget: "splurge",
                healthRating: 8,
                gainsRating: 9,
                cheapRating: 2,
                priceRange: "$$$",
                signature: "Farm-to-Table Steak",
                personalMessage: "When you want to splurge on something absolutely amazing - local, high-quality ingredients and incredible protein!",
                image: "🥩"
            },
            {
                name: "Steamworks Brewing",
                cuisine: "American",
                mood: ["Comfort", "Adventure"],
                budget: "moderate",
                healthRating: 5,
                gainsRating: 6,
                cheapRating: 5,
                priceRange: "$$",
                signature: "Craft Food & Beer",
                personalMessage: "Perfect for when you want good food, great atmosphere, and maybe a drink to unwind!",
                image: "🍺"
            },
            {
                name: "11th Street Station",
                cuisine: "American",
                mood: ["Comfort", "Adventure"],
                budget: "moderate",
                healthRating: 6,
                gainsRating: 6,
                cheapRating: 6,
                priceRange: "$$",
                signature: "Gourmet Street Food",
                personalMessage: "Great atmosphere and unique food trucks - perfect for when you want something different but familiar!",
                image: "🌭"
            },
            {
                name: "Ken & Sue's",
                cuisine: "American",
                mood: ["Indulgent", "Comfort"],
                budget: "splurge",
                healthRating: 5,
                gainsRating: 7,
                cheapRating: 3,
                priceRange: "$$$",
                signature: "Prime Rib",
                personalMessage: "When you want that classic steakhouse experience - their prime rib is legendary in Durango!",
                image: "🥩"
            },
            {
                name: "Cream Bean Berry",
                cuisine: "American",
                mood: ["Indulgent", "Comfort"],
                budget: "cheap",
                healthRating: 2,
                gainsRating: 2,
                cheapRating: 8,
                priceRange: "$",
                signature: "Artisan Ice Cream",
                personalMessage: "For when you need something sweet and creamy to brighten your day - their flavors are incredible!",
                image: "🍦"
            },
            {
                name: "Fired Up Pizzeria",
                cuisine: "American",
                mood: ["Comfort", "Indulgent"],
                budget: "moderate",
                healthRating: 4,
                gainsRating: 5,
                cheapRating: 7,
                priceRange: "$$",
                signature: "Wood-Fired Pizza",
                personalMessage: "Their wood-fired pizzas have that perfect crispy crust you love - great for sharing!",
                image: "🍕"
            },

            // Italian Restaurants
            {
                name: "Homeslice Pizza",
                cuisine: "Italian", 
                mood: ["Comfort", "Indulgent"],
                budget: "moderate",
                healthRating: 4,
                gainsRating: 5,
                cheapRating: 6,
                priceRange: "$$",
                signature: "Wood-Fired Pizza",
                personalMessage: "Nothing beats their wood-fired pizza when you want something cozy and delicious to share!",
                image: "🍕"
            },
            {
                name: "Ariano",
                cuisine: "Italian",
                mood: ["Indulgent", "Adventure"],
                budget: "splurge",
                healthRating: 6,
                gainsRating: 6,
                cheapRating: 2,
                priceRange: "$$$",
                signature: "Fresh Pasta",
                personalMessage: "When you want to feel fancy - their handmade pasta is absolutely divine and so romantic!",
                image: "🍝"
            },
            {
                name: "Mama's Boy Italian",
                cuisine: "Italian",
                mood: ["Comfort", "Indulgent"],
                budget: "moderate",
                healthRating: 5,
                gainsRating: 6,
                cheapRating: 6,
                priceRange: "$$",
                signature: "Chicken Parmesan",
                personalMessage: "Classic Italian comfort food that always makes you feel loved - like a warm hug on a plate!",
                image: "🍗"
            },

            // Asian Restaurants
            {
                name: "Rice Monkeys",
                cuisine: "Asian",
                mood: ["Healthy", "Adventure"],
                budget: "moderate",
                healthRating: 9,
                gainsRating: 8,
                cheapRating: 5,
                priceRange: "$$",
                signature: "Fresh Poke Bowl",
                personalMessage: "You always feel amazing after eating here - fresh fish, vegetables, and so many nutrients!",
                image: "🍣"
            },
            {
                name: "Sushirama",
                cuisine: "Asian",
                mood: ["Healthy", "Adventure"],
                budget: "moderate",
                healthRating: 8,
                gainsRating: 7,
                cheapRating: 5,
                priceRange: "$$",
                signature: "Sushi Rolls",
                personalMessage: "When you want something fresh and beautiful - their sushi is art on a plate!",
                image: "🍣"
            },
            {
                name: "Domo Japanese Country Foods",
                cuisine: "Asian",
                mood: ["Healthy", "Adventure"],
                budget: "moderate",
                healthRating: 8,
                gainsRating: 7,
                cheapRating: 6,
                priceRange: "$$",
                signature: "Bento Box",
                personalMessage: "Authentic Japanese flavors that are both healthy and satisfying - perfect balance!",
                image: "🍱"
            },
            {
                name: "Thai Palace",
                cuisine: "Asian",
                mood: ["Adventure", "Comfort"],
                budget: "moderate",
                healthRating: 7,
                gainsRating: 6,
                cheapRating: 6,
                priceRange: "$$",
                signature: "Pad Thai",
                personalMessage: "When you want those bold Thai flavors - their pad thai is exactly what you're craving!",
                image: "🍜"
            },
            {
                name: "Golden Dragon",
                cuisine: "Asian",
                mood: ["Comfort", "Adventure"],
                budget: "cheap",
                healthRating: 5,
                gainsRating: 6,
                cheapRating: 8,
                priceRange: "$",
                signature: "General Tso's Chicken",
                personalMessage: "Classic Chinese-American comfort food that's affordable and always hits the spot!",
                image: "🥡"
            },

            // Mediterranean/Middle Eastern
            {
                name: "Cyprus Cafe",
                cuisine: "Mediterranean",
                mood: ["Healthy", "Adventure"],
                budget: "splurge",
                healthRating: 9,
                gainsRating: 7,
                cheapRating: 3,
                priceRange: "$$$",
                signature: "Mediterranean Platter",
                personalMessage: "When you want to treat yourself to something exotic and incredibly fresh - the Mediterranean diet is so good for you!",
                image: "🫒"
            },
            {
                name: "Gardenswartz Cafe",
                cuisine: "Mediterranean",
                mood: ["Healthy", "Comfort"],
                budget: "moderate",
                healthRating: 8,
                gainsRating: 6,
                cheapRating: 6,
                priceRange: "$$",
                signature: "Hummus & Falafel",
                personalMessage: "Fresh, healthy Mediterranean food that makes you feel energized and satisfied!",
                image: "🧄"
            },

            // Coffee Shops & Cafes
            {
                name: "Animas Chocolate Company",
                cuisine: "American",
                mood: ["Indulgent", "Comfort"],
                budget: "moderate",
                healthRating: 3,
                gainsRating: 3,
                cheapRating: 5,
                priceRange: "$$",
                signature: "Hot Chocolate",
                personalMessage: "When you need something sweet and comforting - their hot chocolate is like a warm hug!",
                image: "☕"
            },
            {
                name: "Durango Coffee Company",
                cuisine: "American",
                mood: ["Comfort"],
                budget: "cheap",
                healthRating: 4,
                gainsRating: 3,
                cheapRating: 8,
                priceRange: "$",
                signature: "Local Coffee",
                personalMessage: "Perfect for when you need your caffeine fix and a cozy atmosphere!",
                image: "☕"
            },
            {
                name: "Higher Grounds Coffee",
                cuisine: "American",
                mood: ["Comfort", "Healthy"],
                budget: "cheap",
                healthRating: 6,
                gainsRating: 4,
                cheapRating: 8,
                priceRange: "$",
                signature: "Specialty Coffee",
                personalMessage: "Great coffee and healthy options - perfect for your morning routine!",
                image: "☕"
            },

            // Fast Food
            {
                name: "McDonald's",
                cuisine: "Fast Food",
                mood: ["Comfort", "Indulgent"],
                budget: "cheap",
                healthRating: 2,
                gainsRating: 3,
                cheapRating: 10,
                priceRange: "$",
                signature: "Big Mac & Fries",
                personalMessage: "Sometimes you just need those classic comfort flavors - quick, easy, and always satisfying when you're craving it!",
                image: "🍟"
            },
            {
                name: "Taco Bell",
                cuisine: "Fast Food",
                mood: ["Comfort", "Indulgent"],
                budget: "cheap",
                healthRating: 3,
                gainsRating: 4,
                cheapRating: 10,
                priceRange: "$",
                signature: "Crunchwrap Supreme",
                personalMessage: "When you're craving something cheesy, crunchy, and totally satisfying - and it won't break the bank!",
                image: "🌮"
            },
            {
                name: "Wendy's",
                cuisine: "Fast Food",
                mood: ["Comfort", "Indulgent"],
                budget: "cheap",
                healthRating: 3,
                gainsRating: 5,
                cheapRating: 9,
                priceRange: "$",
                signature: "Baconator & Frosty",
                personalMessage: "For when you want that perfect combination of savory and sweet - fresh beef and that amazing frosty!",
                image: "🍔"
            },
            {
                name: "Burger King",
                cuisine: "Fast Food",
                mood: ["Comfort", "Indulgent"],
                budget: "cheap",
                healthRating: 3,
                gainsRating: 4,
                cheapRating: 9,
                priceRange: "$",
                signature: "Whopper",
                personalMessage: "Sometimes you just need a classic flame-grilled burger that's big, juicy, and hits all the right spots!",
                image: "🍔"
            },
            {
                name: "Subway",
                cuisine: "Fast Food",
                mood: ["Healthy", "Comfort"],
                budget: "cheap",
                healthRating: 6,
                gainsRating: 6,
                cheapRating: 8,
                priceRange: "$",
                signature: "Turkey Sub",
                personalMessage: "When you want something quick but still relatively healthy - customize it just how you like!",
                image: "🥪"
            },

            // Breakfast & Brunch
            {
                name: "Oscar's Cafe",
                cuisine: "American",
                mood: ["Comfort", "Indulgent"],
                budget: "moderate",
                healthRating: 4,
                gainsRating: 5,
                cheapRating: 6,
                priceRange: "$$",
                signature: "Green Chile Breakfast",
                personalMessage: "Local favorite for breakfast - their green chile makes everything better!",
                image: "🍳"
            },
            {
                name: "Serious Texas Bar-B-Q",
                cuisine: "American",
                mood: ["Indulgent", "Comfort"],
                budget: "moderate",
                healthRating: 3,
                gainsRating: 8,
                cheapRating: 6,
                priceRange: "$$",
                signature: "Brisket Plate",
                personalMessage: "When you want authentic BBQ that's smoky, tender, and absolutely delicious!",
                image: "🍖"
            },

            // Unique Local Spots
            {
                name: "Ska Brewing",
                cuisine: "American",
                mood: ["Adventure", "Comfort"],
                budget: "moderate",
                healthRating: 5,
                gainsRating: 6,
                cheapRating: 5,
                priceRange: "$$",
                signature: "Beer & Pub Food",
                personalMessage: "Local brewery with great vibes - perfect for trying something new with friends!",
                image: "🍺"
            },
            {
                name: "Carver Brewing",
                cuisine: "American",
                mood: ["Adventure", "Comfort"],
                budget: "moderate",
                healthRating: 5,
                gainsRating: 6,
                cheapRating: 6,
                priceRange: "$$",
                signature: "Craft Beer & Pizza",
                personalMessage: "Local spot with amazing craft beer and wood-fired pizza - perfect combination!",
                image: "🍺"
            },
            {
                name: "Diamond Belle Saloon",
                cuisine: "American",
                mood: ["Adventure", "Indulgent"],
                budget: "moderate",
                healthRating: 4,
                gainsRating: 5,
                cheapRating: 5,
                priceRange: "$$",
                signature: "Historic Atmosphere",
                personalMessage: "Step back in time with classic cocktails and bar food - such a unique experience!",
                image: "🥃"
            },
            {
                name: "Seasons Rotisserie & Grill",
                cuisine: "American",
                mood: ["Healthy", "Comfort"],
                budget: "moderate",
                healthRating: 7,
                gainsRating: 8,
                cheapRating: 5,
                priceRange: "$$",
                signature: "Rotisserie Chicken",
                personalMessage: "Healthy, high-protein meals that taste amazing - their rotisserie chicken is perfection!",
                image: "🍗"
            },
            {
                name: "Raider Ridge Cafe",
                cuisine: "American",
                mood: ["Comfort"],
                budget: "cheap",
                healthRating: 5,
                gainsRating: 5,
                cheapRating: 8,
                priceRange: "$",
                signature: "Comfort Food",
                personalMessage: "Local diner with hearty portions and friendly service - feels like home!",
                image: "🍽️"
            },

            // Health Food & Organic
            {
                name: "Natural Grocers Cafe",
                cuisine: "American",
                mood: ["Healthy"],
                budget: "moderate",
                healthRating: 9,
                gainsRating: 7,
                cheapRating: 5,
                priceRange: "$$",
                signature: "Organic Smoothies",
                personalMessage: "When you want to fuel your body with the healthiest options - organic and delicious!",
                image: "🥤"
            },
            {
                name: "Juice Joint",
                cuisine: "American",
                mood: ["Healthy"],
                budget: "moderate",
                healthRating: 10,
                gainsRating: 6,
                cheapRating: 4,
                priceRange: "$$",
                signature: "Fresh Juice",
                personalMessage: "Pure nutrition in a glass - perfect for when you want to reset and feel amazing!",
                image: "🥤"
            }
        ];

        // App state
        let currentScreen = 'welcome-screen';
        let userPreferences = {};
        let scoredRestaurants = [];

        // Screen navigation
        function showScreen(screenId) {
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
            });
            document.getElementById(screenId).classList.add('active');
            currentScreen = screenId;
        }

        // Start questionnaire
        function startQuestionnaire() {
            showScreen('mood-screen');
        }

        // Select option and move to next screen
        function selectOption(category, value) {
            userPreferences[category] = value;
            
            const nextScreen = {
                'mood': 'cuisine-screen',
                'cuisine': 'budget-screen',
                'budget': 'results-screen'
            };

            if (nextScreen[category] === 'results-screen') {
                generateRecommendations();
            }
            
            showScreen(nextScreen[category]);
        }

        // Calculate accurate match percentage based on selections
        function calculateMatchPercentage(restaurant) {
            let matchScore = 0;
            let totalCriteria = 3; // mood, cuisine, budget

            // Mood match (33.33% of total)
            if (restaurant.mood.includes(userPreferences.mood)) {
                matchScore += 1;
            }
            
            // Cuisine match (33.33% of total)
            if (userPreferences.cuisine === 'Surprise') {
                matchScore += 0.7; // Partial match for surprise
            } else if (restaurant.cuisine === userPreferences.cuisine) {
                matchScore += 1;
            }
            
            // Budget match (33.33% of total)
            if (restaurant.budget === userPreferences.budget) {
                matchScore += 1;
            }

            // Convert to percentage (0-100%)
            const basePercentage = (matchScore / totalCriteria) * 100;
            
            // Add small quality bonus to break ties (max 5 points)
            const qualityBonus = ((restaurant.healthRating + restaurant.gainsRating + restaurant.cheapRating) / 30) * 5;
            
            const finalPercentage = basePercentage + qualityBonus;
            
            // Ensure it doesn't exceed 100%
            return Math.min(100, Math.round(finalPercentage));
        }

        // Enhanced scoring algorithm for ranking
        function scoreRestaurant(restaurant) {
            let score = 0;
            
            // Mood match - highest priority (50 points)
            if (restaurant.mood.includes(userPreferences.mood)) {
                score += 50;
            }
            
            // Cuisine match - second priority (35 points)
            if (userPreferences.cuisine === 'Surprise') {
                score += 15; // Lower score for surprise to add variety
            } else if (restaurant.cuisine === userPreferences.cuisine) {
                score += 35;
            }
            
            // Budget match - third priority (15 points)
            if (restaurant.budget === userPreferences.budget) {
                score += 15;
            }
            
            // Quality bonus (weighted by category)
            const qualityBonus = (restaurant.healthRating * 0.3) + 
                               (restaurant.gainsRating * 0.3) + 
                               (restaurant.cheapRating * 0.4);
            score += qualityBonus;
            
            return score;
        }

        // Generate recommendations with accurate scoring
        function generateRecommendations() {
            scoredRestaurants = restaurants.map(restaurant => ({
                ...restaurant,
                score: scoreRestaurant(restaurant),
                matchPercentage: calculateMatchPercentage(restaurant)
            }));
            
            // Sort by score, then by match percentage for ties
            scoredRestaurants.sort((a, b) => {
                if (b.score !== a.score) {
                    return b.score - a.score;
                }
                return b.matchPercentage - a.matchPercentage;
            });

            // Apply small ranking adjustment to ensure unique percentages
            scoredRestaurants.forEach((restaurant, index) => {
                if (index > 0) {
                    // Reduce by 1% per rank to ensure uniqueness while keeping accuracy
                    restaurant.matchPercentage = Math.max(0, restaurant.matchPercentage - index);
                }
            });
            
            // Keep only top 5 restaurants
            scoredRestaurants = scoredRestaurants.slice(0, 5);
            
            displayRestaurantsList();
            
            // Save the top choice
            if (scoredRestaurants.length > 0) {
                saveLastChoice(scoredRestaurants[0]);
            }
        }

        // Display restaurants list with match percentages
        function displayRestaurantsList() {
            const listContainer = document.getElementById('restaurants-list');
            listContainer.innerHTML = '';
            
            scoredRestaurants.forEach((restaurant, index) => {
                const restaurantItem = document.createElement('div');
                restaurantItem.className = 'restaurant-item';
                
                restaurantItem.innerHTML = `
                    <div class="restaurant-header">
                        <div class="restaurant-name-section">
                            <div class="restaurant-name">${restaurant.name}</div>
                            <div class="restaurant-cuisine">${restaurant.cuisine} Cuisine</div>
                        </div>
                        <div class="match-percentage">
                            <div class="percentage-value">${restaurant.matchPercentage}%</div>
                            <div class="percentage-label">Match</div>
                        </div>
                    </div>
                    
                    <div class="restaurant-details">
                        <div class="price-budget">
                            <span class="price-display">${restaurant.priceRange}</span>
                        </div>
                        <div class="signature-dish">
                            Signature: ${restaurant.signature}
                        </div>
                    </div>
                    
                    <div class="ratings-row">
                        <div class="rating-mini">
                            <span class="rating-mini-emoji">🥗</span>
                            <div class="rating-mini-value">${restaurant.healthRating}/10</div>
                        </div>
                        <div class="rating-mini">
                            <span class="rating-mini-emoji">💪</span>
                            <div class="rating-mini-value">${restaurant.gainsRating}/10</div>
                        </div>
                        <div class="rating-mini">
                            <span class="rating-mini-emoji">💰</span>
                            <div class="rating-mini-value">${restaurant.cheapRating}/10</div>
                        </div>
                    </div>
                    
                    <div class="restaurant-message">
                        ${restaurant.personalMessage}
                    </div>
                `;
                
                listContainer.appendChild(restaurantItem);
            });
        }

        // Surprise me function with better randomization
        function surpriseMe() {
            userPreferences = { mood: 'Adventure', cuisine: 'Surprise', budget: 'moderate' };
            
            // Get 5 random restaurants
            const shuffled = [...restaurants].sort(() => 0.5 - Math.random());
            const randomRestaurants = shuffled.slice(0, 5);
            
            // Create scored list with unique percentages
            scoredRestaurants = randomRestaurants.map((restaurant, index) => ({
                ...restaurant,
                score: 100 - (index * 10),
                matchPercentage: Math.min(100, 95 - (index * 4)) // Ensures unique percentages: 95%, 91%, 87%, 83%, 79%
            }));
            
            displayRestaurantsList();
            saveLastChoice(scoredRestaurants[0]);
            showScreen('results-screen');
        }

        // Save last choice to localStorage
        function saveLastChoice(restaurant) {
            localStorage.setItem('lastChoice', JSON.stringify({
                name: restaurant.name,
                signature: restaurant.signature,
                timestamp: Date.now()
            }));
        }

        // Load last choice (removed from UI but keeping for functionality)
        function loadLastChoice() {
            // Function kept for backwards compatibility but no longer displays on screen
        }

        // Reset app
        function resetApp() {
            userPreferences = {};
            scoredRestaurants = [];
            showScreen('welcome-screen');
        }

        // Initialize app
        function init() {
            loadLastChoice();
            showScreen('welcome-screen');
        }

        // Register service worker for PWA functionality
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('./service-worker.js')
                    .then((registration) => {
                        console.log('SW registered: ', registration);
                    })
                    .catch((registrationError) => {
                        console.log('SW registration failed: ', registrationError);
                    });
            });
        }

        // Start the app
        init();
    </script>
</body>
</html>